{% extends "portal/generic/base.tmpl.html" %}
{% load fediverser %}

{% block main_content %}
<dl>
  <dt>Community Page</dt>
  <dd><a href="{{ object.url }}"}} target="_blank">{{ object.fqdn }}</a></dd>
  {% if object.status %}
  <dt>Status</dt>
  <dd>{{ object.get_status_display }}</dd>
  {% endif %}
  {% if object.category %}
  <dt>Category</dt>
  <dd>{{ object.category.name }}</dd>
  {% endif %}
</dl>
<hr />

{% if not object.category %}
<h3>Category</h3>
{% if not user|pending_community_category_proposal:object %}
<p>This community has not been properly categorized yet. Please indicate the category which closest describe it:</p>
<form action="{% url 'fediverser-core:community-categoryrecommendation-create' name=object.name instance_domain=object.instance.domain %}" method="POST" novalidate>
  {% csrf_token %}
  <ul class="fields">
    {% for field in category_picker_form.visible_fields %}
    <li>
      {% include "wagtailadmin/shared/field.html" %}
    </li>
    {% endfor %}
    <li>
      <input type="submit" value="Submit Category" class="button" />
    </li>
  </ul>
</form>
{% else %}
<p>You already recommended a category! Please check your <a href="{% url 'fediverser-core:activity-list' %}">activity page</a> for more information.</p>
{% endif %}
{% endif %}


<h2>Community Ambassadors</h2>
<p>Interested in helping {{ object.fqdn }} grow can become a <strong>Community Ambassador</strong>? You will be able to:</p>

<ul>
  <li>Create curated sources of content which can be easily shared with the community</li>
  <li>Reach out to users on Reddit that might be interested in migrating to the Fediverse</li>
  <li>Define policies for content bridging between the Fediverse and Reddit</li>
</ul>
{% if user|is_ambassador:object %}
You are enrolled as an ambassador for {{ object.fqdn }}.
{% elif user|has_pending_ambassador_application:object %}
<p>Your application has been received and will be reviewed by an admin.</p>
{% else %}
<form action="{% url 'fediverser-core:community-ambassador-application-create' name=object.name instance_domain=object.instance.domain %}" method="POST" novalidate>
  {% csrf_token %}
  <input type="submit" value="Submit Application" class="button" />
</form>
{% endif %}
{% endblock %}

{% block extra_js %}
{{ block.super }}
{{ category_picker_form.media.js }}
{% endblock %}

{% block extra_css %}
{{ block.super }}
{{ category_picker_form.media.css }}
{% endblock %}
