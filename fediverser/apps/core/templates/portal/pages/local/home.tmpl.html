{% extends "portal/base.tmpl.html" %}
{% load fediverser wagtailadmin_tags %}

{% block main_content %}
<header class="w-header w-header--merged">
  <div class="row">
    <div class="left">
      <div class="col">
        <h1 class="w-header__title" id="header-title">Welcome to {% site_name %}</h1>
        {% if user.is_authenticated %}
        <div class="w-header__description">{{ user }}</div>
        {% endif %}
      </div>
    </div>
    <div class="right">
    </div>
  </div>
</header>

{% if not user.is_authenticated %}
{% fediversed_lemmy as fediversed_lemmy_configuration %}
{% if fediversed_lemmy_configuration.allows_reddit_signup %}
<section>
  <h3>One-click migration from Reddit to {{ fediversed_lemmy_configuration.instance.domain }}</h3>
  <p>
    If you are a Reddit user and want to import your subscriptions, we
    can help. You just need to
    <a href="{% url 'fediverser-core:reddit-connection-setup' %}">authorize the connection</a>
    once, and we will import your subreddits to find the corresponding
    Lemmy groups.
  </p>
</section>
{% endif %}

<section>
  <h3>Help build the most comprehensive map of communities in the Fediverse</h3>
  <p>
    We already recommend alternatives for thousands of the most popular
    subreddits. Our goal is to expand this database so that we can
    help everyone find other people that share the same interests as yours.
  </p>
</section>

{% else %}
<section class="w-summary" aria-labelledby="header-title">
  <h2 class="w-sr-only">Your dashboard</h2>
  <ul class="w-summary__list">
    <li>
      {% icon name="group" %}
      <a href="{% url 'fediverser-core:subreddit-list' %}">
        <span>{{ user.account.tracked_subreddits.count }}</span> subreddits tracked
      </a>
    </li>
    <li>
      {% icon name="group" %}
      <a href="{% url 'fediverser-core:community-list' %}">
        <span>{{ user.account.recommended_communities.count }}</span> communities recommended for you</span>
      </a>
    </li>
  </ul>
</section>
{% endif %}
{% endblock %}
